<!DOCTYPE html>

<html>
<head>
</head>
<body>
  <form action="#" method="post">
    <div>
      <label>Name:</label>
      <input type="text" name="first_name">
    </div>
    <div>
      <select name="sex">
        <option value="male">male</option>
        <option value="female">female</option>
      </select>
    </div>
    <div class="button">
        <button type="submit">Submit</button>
    </div>
  </form>
  <div>
    hit count = {{hit_count}}
  </div>
  <div>
    <h2>
      People
    </h2>
    <ul>
      {{#people}}
      <li> name: <span class="first-name">{{name}}</span>, sex: {{sex}} <button class="close_button" aria-label="delete">&times;</button></li>
      {{/people}}
    </ul>
  </div>
<script type="text/javascript">
  var closeButtons = document.getElementsByClassName("close_button");
  for (var i = 0; i < closeButtons.length; i++) {
    closeButtons[i].addEventListener("click", function(event) {
      var name = event.target.parentNode.getElementsByClassName("first-name")[0].innerHTML;
      if (confirm("Do you really want to delete " + name +" ?")) {
        var deleteRequest = new XMLHttpRequest();
        deleteRequest.open('DELETE', encodeURIComponent(name));
        deleteRequest.send();
        deleteRequest.onload = function() {
          location.reload();
        }
      }
    });
  }

</script>
</body>
</html>
